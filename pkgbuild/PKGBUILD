pkgname=mangohud-2
pkgver=v1
pkgrel=1
pkgdesc="MangoHud with server-client architecture"
arch=('x86_64')
url="https://github.com/17314642/MangoHud-2"
makedepends=('ninja' 'meson' 'python-mako' 'glslang' 'pkgconf' 'gcc' 'libdrm' 'patch')
license=('MIT')
source=(
    "mangohud-2"::"git+${url}"
    "change-drm-include-dir.patch"
)

sha256sums=(
    'SKIP'
    'a6156b0b561557c8416b246c53f6ddb2f0cc83d40c5d0b3fcb45f6a03838b783'
)

prepare() {
    cd "$srcdir/$pkgname"
    patch -p1 < ../change-drm-include-dir.patch
}

build() {
    cd "$srcdir/$pkgname"
    meson setup build
    ninja -C build
}

package() {
    cd "$srcdir/$pkgname"
    DESTDIR="$pkgdir/" ninja -C build install
}
