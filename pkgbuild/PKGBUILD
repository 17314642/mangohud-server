pkgname=mangohud-2
pkgver=v1
pkgrel=1
pkgdesc="MangoHud with server-client architecture"
arch=('x86_64')
url="https://github.com/17314642/MangoHud-2"
makedepends=('ninja' 'meson' 'python-mako' 'glslang' 'pkgconf' 'gcc' 'libdrm' 'patch')
license=('MIT')
source=(
    "mangohud-2"::"git+${url}"
    "change-drm-include-dir.patch"
)

sha256sums=(
    'SKIP'
    'dc96219a9b1f207add6730f620fa04a2aa2101b7551d1249b5be57ff92c29976'
)

prepare() {
    cd "$srcdir/$pkgname"
    patch -p1 < ../change-drm-include-dir.patch
}

build() {
    cd "$srcdir/$pkgname"
    meson setup build
    ninja -C build
}

package() {
    cd "$srcdir/$pkgname"
    DESTDIR="$pkgdir/" ninja -C build install
}
